# Headplane configuration for Coolify deployment
# Web UI for managing Headscale

server:
  # Bind address
  host: "0.0.0.0"
  port: 3000

  # Session cookie secret (must be 32 characters)
  # Set via HEADPLANE_COOKIE_SECRET env var
  cookie_secret: "${HEADPLANE_COOKIE_SECRET}"

  # Mark cookies as Secure (HTTPS only) - enabled since we use Traefik TLS
  cookie_secure: true

  # Session max age (1 day)
  cookie_max_age: 86400

  # Persistence directory for Headplane data
  data_path: "/var/lib/headplane"

# Headscale integration
headscale:
  # Internal Headscale URL (HTTP from within container)
  # When Headscale is in the same Docker network, use the service name
  url: "http://headscale:8080"
  
  # Public Headscale URL (for UI display and client redirects)
  public_url: "https://headscale.megabyte.space"

  # Path to Headscale config file (read-only for inspection)
  config_path: "/etc/headscale/config.yaml"
  
  # Strict validation of config (recommended for production)
  config_strict: true

# Integration configurations
integration:
  # Docker integration (auto-restart Headscale on DNS changes)
  docker:
    enabled: true
    
    # Container label to identify the Headscale service
    container_label: "me.tale.headplane.target=headscale"
    
    # Docker socket
    socket: "unix:///var/run/docker.sock"

  # Disable agent for now (optional feature)
  agent:
    enabled: false

  # Disable other integrations
  kubernetes:
    enabled: false
  
  proc:
    enabled: false